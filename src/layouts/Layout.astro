<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <title>Acme Corp Brand Guidelines</title>
    <script src="/js/colorManager.js" type="module" is:inline></script>

    <!-- Initialize color manager with brand data -->
    <script is:inline>
      document.addEventListener("DOMContentLoaded", function () {
        // Import brand data
        fetch("/data/brand.json")
          .then((response) => response.json())
          .then((brandData) => {
            console.log("Brand data loaded:", brandData);

            // Initialize color manager with the colors from brand.json
            if (window.colorManagerModule) {
              window.colorManager = window.colorManagerModule.initColorManager(
                brandData.colors,
              );
              console.log("Color manager initialized");
            } else {
              console.error("Color manager module not available");
            }
          })
          .catch((error) => console.error("Error loading brand data:", error));
      });
    </script>
  </head>
  <body>
    <header>
      <nav>
        <div class="nav-content">
          <a href="/" class="logo">
            <img
              src="/assets/logo-primary.svg"
              alt="Acme Corp Logo"
              width="150"
              height="45"
            />
            <span>Brand Guidelines</span>
          </a>
          <div class="nav-links">
            <a href="#logos" class="nav-link">Logos</a>
            <a href="#colors" class="nav-link">Colors</a>
            <a href="#typography" class="nav-link">Typography</a>
          </div>
          <button class="mobile-menu-toggle" aria-label="Toggle menu">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              ><line x1="3" y1="12" x2="21" y2="12"></line><line
                x1="3"
                y1="6"
                x2="21"
                y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg
            >
          </button>
        </div>
      </nav>
    </header>
    <main>
      <slot />
    </main>
    <footer>
      <div class="footer-content">
        <div class="footer-logo">
          <img
            src="/assets/logo-dark.svg"
            alt="Acme Corp Logo"
            width="150"
            height="45"
          />
        </div>
        <div class="footer-links">
          <div class="footer-section">
            <h3>Brand Assets</h3>
            <ul>
              <li><a href="#logos">Logos</a></li>
              <li><a href="#colors">Colors</a></li>
              <li><a href="#typography">Typography</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>Resources</h3>
            <ul>
              <li><a href="#">Download All Assets</a></li>
              <li><a href="#">Brand Guidelines PDF</a></li>
              <li><a href="#">Contact Brand Team</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Acme Corp. All rights reserved.</p>
      </div>
    </footer>
  </body>
</html>

<style is:global>
  :root {
    /* These default values will be overridden by the colorManager.js */
    --primary: #2563eb;
    --primary-light: #60a5fa;
    --primary-dark: #1e40af;
    --accent-purple: #8b5cf6;
    --accent-green: #10b981;
    --accent-red: #ef4444;
    --text: #1f2937;
    --text-light: #6b7280;
    --background: #ffffff;
    --secondary-bg: #f3f4f6;
    --border: #e5e7eb;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg:
      0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --radius-sm: 0.375rem;
    --radius: 0.5rem;
    --radius-lg: 1rem;
    --footer-bg: #1f2937;
    --footer-text: #f3f4f6;

    /* Add transition for smooth color changes */
    transition:
      color 0.3s ease,
      background-color 0.3s ease,
      border-color 0.3s ease;
  }

  /* Base Styles */
  html {
    font-family: "Inter", sans-serif;
    scroll-behavior: smooth;
    scroll-padding-top: 80px; /* Adjust for fixed header */
  }

  body {
    margin: 0;
    padding: 0;
    color: var(--text);
    background: var(--background);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  main {
    flex: 1;
    padding: 6rem 2rem 4rem;
    width: 100%;
    box-sizing: border-box;
    overflow-x: hidden;
  }

  /* Header & Navigation */
  header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: var(--background);
    border-bottom: 1px solid var(--border);
    z-index: 100;
    box-shadow: var(--shadow-sm);
  }

  nav {
    max-width: 1200px;
    margin: 0 auto;
  }

  .nav-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    width: 100%;
    box-sizing: border-box;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: var(--text);
  }

  .logo span {
    font-weight: 600;
    font-size: 1.25rem;
  }

  .nav-links {
    display: flex;
    gap: 2.5rem;
  }

  .nav-link {
    color: var(--text);
    text-decoration: none;
    font-weight: 500;
    padding: 0.5rem 0;
    position: relative;
    transition: color 0.2s ease;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: var(--primary);
    transition: width 0.3s ease;
  }

  .nav-link:hover {
    color: var(--primary);
  }

  .nav-link:hover::after {
    width: 100%;
  }

  .nav-link.active-section {
    color: var(--primary);
  }

  .nav-link.active-section::after {
    width: 100%;
  }

  /* Prevent scrolling when mobile menu is open */
  body.menu-open {
    overflow: hidden;
  }

  .mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text);
    padding: 0.5rem;
    margin-left: 0.5rem;
    border-radius: var(--radius-sm);
    transition: background-color 0.2s ease;
  }

  .mobile-menu-toggle:hover {
    background-color: var(--secondary-bg);
  }

  .mobile-menu-toggle:active {
    transform: scale(0.95);
  }

  /* Footer Styles */
  footer {
    background-color: var(--footer-bg);
    color: var(--footer-text);
    padding: 4rem 2rem 1rem;
    margin-top: 4rem;
  }

  .footer-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    gap: 4rem;
    margin-bottom: 3rem;
  }

  .footer-logo {
    max-width: 200px;
  }

  .footer-links {
    display: flex;
    gap: 4rem;
  }

  .footer-section h3 {
    font-size: 1.125rem;
    margin-top: 0;
    margin-bottom: 1.5rem;
    color: white;
  }

  .footer-section ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
  }

  .footer-section li {
    margin-bottom: 0.75rem;
  }

  .footer-section a {
    color: var(--footer-text);
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .footer-section a:hover {
    color: var(--primary-light);
    text-decoration: underline;
  }

  .footer-bottom {
    max-width: 1200px;
    margin: 0 auto;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.7);
  }

  /* Responsive Styles */
  @media (max-width: 992px) {
    .footer-content {
      flex-direction: column;
      gap: 2rem;
    }

    .footer-logo {
      margin: 0;
      text-align: left;
    }

    .nav-content {
      padding: 0.75rem 1.5rem;
    }
  }

  @media (max-width: 768px) {
    .nav-links {
      display: none;
    }

    .mobile-menu-toggle {
      display: block;
    }

    .footer-links {
      flex-direction: column;
      gap: 2rem;
    }

    main {
      padding: 4.5rem 1rem 2rem;
    }

    .logo span {
      font-size: 1rem;
    }

    .logo img {
      width: 120px;
      height: auto;
    }

    .footer-content {
      gap: 2rem;
    }

    footer {
      padding: 3rem 1.5rem 1rem;
    }
  }

  /* Mobile Menu Animation */
  @media (max-width: 768px) {
    .nav-links.active {
      display: flex;
      flex-direction: column;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--background);
      padding: 1rem;
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow);
      animation: slideDown 0.3s ease-out forwards;
      z-index: 200;
    }

    .nav-links.active .nav-link {
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border);
      width: 100%;
      text-align: center;
    }

    .nav-links.active .nav-link:last-child {
      border-bottom: none;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }

  /* Small mobile devices */
  @media (max-width: 480px) {
    .nav-content {
      padding: 0.5rem 1rem;
    }

    .logo span {
      font-size: 0.9rem;
    }

    .logo img {
      width: 100px;
    }

    main {
      padding: 4rem 0.75rem 1.5rem;
    }

    footer {
      padding: 2rem 1rem 1rem;
      margin-top: 2rem;
    }
  }
</style>

<script is:inline>
  // Mobile menu toggle
  document.addEventListener("DOMContentLoaded", function () {
    // Handle mobile menu toggle
    const mobileMenuToggle = document.querySelector(".mobile-menu-toggle");
    const navLinks = document.querySelector(".nav-links");

    if (mobileMenuToggle && navLinks) {
      mobileMenuToggle.addEventListener("click", function (e) {
        e.preventDefault();
        e.stopPropagation();
        navLinks.classList.toggle("active");

        // Toggle aria-expanded attribute for accessibility
        const isExpanded = navLinks.classList.contains("active");
        mobileMenuToggle.setAttribute("aria-expanded", isExpanded);

        // Add a class to the body to prevent scrolling when menu is open
        if (isExpanded) {
          document.body.classList.add("menu-open");
        } else {
          document.body.classList.remove("menu-open");
        }
      });
    }

    // Use color manager from global object
    // Apply CSS variables from color manager if available
    if (window.colorManager) {
      const colorData = window.colorManager.getColorData();
      window.colorManagerModule.updateCSSVariables(colorData);
    }

    // Close mobile menu when clicking outside
    document.addEventListener("click", (e) => {
      if (navLinks && navLinks.classList.contains("active")) {
        if (!e.target.closest("nav")) {
          navLinks.classList.remove("active");
          document.body.classList.remove("menu-open");
          if (mobileMenuToggle) {
            mobileMenuToggle.setAttribute("aria-expanded", "false");
          }
        }
      }
    });

    // Close mobile menu when clicking on a nav link
    const navLinkItems = document.querySelectorAll(".nav-link");
    navLinkItems.forEach((link) => {
      link.addEventListener("click", () => {
        if (window.innerWidth <= 768 && navLinks) {
          navLinks.classList.remove("active");
          document.body.classList.remove("menu-open");
          if (mobileMenuToggle) {
            mobileMenuToggle.setAttribute("aria-expanded", "false");
          }
        }
      });
    });

    // Highlight active nav link based on scroll position
    const sections = document.querySelectorAll("section[id]");
    const navItems = document.querySelectorAll(".nav-link");

    function highlightNavOnScroll() {
      let scrollPosition = window.scrollY;

      sections.forEach((section) => {
        const sectionTop = section.offsetTop - 100;
        const sectionHeight = section.offsetHeight;
        const sectionId = section.getAttribute("id");

        if (
          scrollPosition >= sectionTop &&
          scrollPosition < sectionTop + sectionHeight
        ) {
          navItems.forEach((item) => {
            item.classList.remove("active-section");
            if (item.getAttribute("href") === `#${sectionId}`) {
              item.classList.add("active-section");
            }
          });
        }
      });
    }

    window.addEventListener("scroll", highlightNavOnScroll);
    highlightNavOnScroll(); // Run once on page load

    // Handle window resize - reset menu state if window is resized above mobile breakpoint
    window.addEventListener("resize", () => {
      if (
        window.innerWidth > 768 &&
        navLinks &&
        navLinks.classList.contains("active")
      ) {
        navLinks.classList.remove("active");
        document.body.classList.remove("menu-open");
        if (mobileMenuToggle) {
          mobileMenuToggle.setAttribute("aria-expanded", "false");
        }
      }
    });
  });
</script>
